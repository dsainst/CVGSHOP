(function(a){a.fn.airStickyBlock=function(b){a.airStickyBlock=function(h,g){var u,l,m,k,c,t,s,n,r,q,j,d,w,i,e;u=a.extend({debug:false,stopBlock:".airSticky__stop-block"},g);l=a(u.stopBlock);m=h.parent();if(u.debug){a("body").append('<div id="airSticky-debug" style="position: fixed;top: 0;left: 0;padding: 10px;background: #272727;color: #9d9d9d;z-index: 1000;opacity: 0.9;">')}function x(){k=a(window).height();c=l.height();t=l.width();s=l.offset().top;r=m.width();n=m.offset().top;q=h.outerHeight(true);j=r;d=c+s-q;w=n+h.position().top;i=d-n}x();function o(){e=a(window).scrollTop();if(u.debug){a("#airSticky-debug").html("<p>windowHeight - "+k+"</p><p>stopBlockHeight - "+c+"</p><p>stopBlockWidth - "+t+"</p><p>stopBlockOffset - "+s+"</p><p>stickyParentOffset - "+n+"</p><p>stickyParentWidth - "+r+"</p><p>stickyHeight - "+q+"</p><p>stickyWidth - "+j+"</p><p>stickyStop - "+d+"</p><p>stickyStart - "+w+"</p><p>stickyAbsolute - "+i+"</p><p>scrollTop - "+e+"</p>")}if(e>=w&&e<=d){f("fixed")}else{if(h.css("position")!="relative"){v(m);f("relative")}}if(e>=w&&e>=d){f("absolute")}if(e>d+q){f("relative")}}o();function v(y){y.removeAttr("style")}function f(y){switch(y){case"fixed":h.css({position:y,top:0}).removeClass("airSticky_absolute airSticky_relative").addClass("airSticky_fixed");break;case"absolute":h.css({position:y,top:i+"px"}).removeClass("airSticky_fixed airSticky_relative").addClass("airSticky_absolute");break;case"relative":h.css({position:"relative",top:"auto"}).removeClass("airSticky_fixed airSticky_absolute").addClass("airSticky_relative");break}}function p(){h.css({width:j+"px"})}p();a(window).bind("resize scroll orientationchange",function(){if(event.type=="scroll"&&d>w&&t>j){o()}else{v(h);x();if(d>w&&t>j){p();o()}}})};return this.each(function(){(new a.airStickyBlock(a(this),b))})}})(jQuery);